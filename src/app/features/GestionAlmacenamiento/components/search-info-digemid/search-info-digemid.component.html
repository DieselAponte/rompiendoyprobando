<div class="search-digemid-container">
    <h3>Búsqueda de Producto por Código DIGEMID</h3>
    <div class="search-row">
        <input matInput placeholder="Código DIGEMID" [(ngModel)]="codigoDigemid" (keyup.enter)="buscar()" />
        <button mat-stroked-button color="primary" (click)="buscar()">Buscar</button>
    </div>
    <p class="error" *ngIf="mensajeError">{{ mensajeError }}</p>
    <p class="ok" *ngIf="mensajeOk">{{ mensajeOk }}</p>

    <div *ngIf="productoEncontrado" class="resultado">
        <table mat-table [dataSource]="[productoEncontrado]" class="mini-table">
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef>ID</th>
                <td mat-cell *matCellDef="let p">{{ p.id }}</td>
            </ng-container>
            <ng-container matColumnDef="nombre">
                <th mat-header-cell *matHeaderCellDef>Nombre</th>
                <td mat-cell *matCellDef="let p">{{ p.nombreProducto }}</td>
            </ng-container>
            <ng-container matColumnDef="codigo">
                <th mat-header-cell *matHeaderCellDef>Codigo DIGEMID</th>
                <td mat-cell *matCellDef="let p">{{ p.codigoDigemid || '—' }}</td>
            </ng-container>
            <ng-container matColumnDef="tipo">
                <th mat-header-cell *matHeaderCellDef>Tipo</th>
                <td mat-cell *matCellDef="let p">{{ p.idTipoNombreTipo || '—' }}</td>
            </ng-container>
            <ng-container matColumnDef="forma">
                <th mat-header-cell *matHeaderCellDef>Forma</th>
                <td mat-cell *matCellDef="let p">{{ p.idFormaNombreForma || '—' }}</td>
            </ng-container>
            <ng-container matColumnDef="condiciones">
                <th mat-header-cell *matHeaderCellDef>Almacenamiento</th>
                <td mat-cell *matCellDef="let p">{{ p.condicionesAlmacenamiento || '—' }}</td>
            </ng-container>

            <tr mat-header-row
                *matHeaderRowDef="['id','nombre','codigo','tipo','forma','condiciones']">
            </tr>
            <tr mat-row
                *matRowDef="let row; columns: ['id','nombre','codigo','tipo','forma','condiciones']">
            </tr>
        </table>

        <div class="cantidad-row">
            <label for="cantidad">Cantidad:</label>
            <textarea id="cantidad" [(ngModel)]="cantidadTexto" placeholder="cantidad" rows="1"></textarea>
            <button mat-raised-button color="accent" (click)="agregar()">Agregar</button>
        </div>
    </div>
</div>